<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTSP Web Transcoder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .opt-card.selected {
            border: 2px solid #3b82f6;
            background-color: rgba(59, 130, 246, 0.1);
        }

        .dark .opt-card.selected {
            background-color: rgba(30, 58, 138, 0.2);
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-white min-h-screen transition-colors duration-200">
    <div class="container mx-auto px-4 py-8">
        <header class="flex justify-between items-center mb-8 border-b border-gray-200 dark:border-gray-700 pb-6">
            <div>
                <h1 class="text-2xl font-bold text-blue-600 dark:text-blue-400">RTSP Web Transcoder</h1>
                <p class="text-gray-500 dark:text-gray-400 text-sm mt-1">Manage and view your live streams</p>
            </div>
            <div class="flex items-center gap-4">
                <button id="themeToggleBtn"
                    class="p-2 rounded-lg bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-yellow-400 hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors">
                    <!-- Sun Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden dark:block" viewBox="0 0 20 20"
                        fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h1a1 1 0 100 2h-1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1z"
                            clip-rule="evenodd" />
                    </svg>
                    <!-- Moon Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 block dark:hidden" viewBox="0 0 20 20"
                        fill="currentColor">
                        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
                    </svg>
                </button>
                <!-- Settings Button Removed -->
                <button id="addStreamBtn"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 shadow-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"
                            clip-rule="evenodd" />
                    </svg>
                    Add Stream
                </button>
            </div>
        </header>

        <section id="streamsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            {{ range .Streams }}
            <div class="card bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-gray-600 transition-all"
                data-name="{{ .Name }}" data-url="{{ .URL }}">
                <div
                    class="p-4 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700/50">
                    <h3 class="font-semibold text-lg truncate text-gray-800 dark:text-white" title="{{ .Name }}">{{
                        .Name }}</h3>
                    <div class="flex gap-2">

                        <button
                            class="text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors edit-btn"
                            onclick="openEditModal('{{ .Name }}', '{{ .URL }}')">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                            </svg>
                        </button>
                        <button
                            class="text-gray-500 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors snapshot-btn"
                            onclick="takeSnapshot('{{ .Name }}')" title="Take Snapshot">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                        <button
                            class="text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors delete-btn"
                            onclick="deleteStream('{{ .Name }}')">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>

                        <button
                            class="text-gray-500 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors share-btn"
                            onclick="openShareModal('{{ .Name }}')">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />
                            </svg>
                        </button>
                    </div>
                </div>
                <!-- Aspect Ratio 16/9 -->
                <div class="video-container relative w-full bg-black aspect-video group" id="video-{{ .Name }}">
                    <!-- Video player will be injected here -->
                </div>
                <div
                    class="p-3 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center gap-2">
                    <span class="text-xs text-gray-500 dark:text-gray-400 font-medium">Mode:</span>
                    <div class="flex gap-2">
                        <button onclick="reloadPlayer('{{ .Name }}', 'webrtc')"
                            class="px-2 py-1 text-xs font-medium rounded bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors">
                            WebRTC
                        </button>
                        <button onclick="reloadPlayer('{{ .Name }}', 'mse')"
                            class="px-2 py-1 text-xs font-medium rounded bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-800 transition-colors">
                            MSE
                        </button>

                    </div>
                </div>
            </div>
            {{ else }}
            <div
                class="col-span-full text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-dashed border-gray-300 dark:border-gray-700">
                <div
                    class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-200 dark:bg-gray-700/50 text-gray-400 dark:text-gray-500 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                </div>
                <h3 class="text-xl font-medium text-gray-900 dark:text-white mb-2">No streams yet</h3>
                <p class="text-gray-500 dark:text-gray-400 mb-6">Add your first RTSP stream to get started</p>
                <button onclick="document.getElementById('addStreamBtn').click()"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors shadow-sm">
                    Add Stream
                </button>
            </div>
            {{ end }}
        </section>
    </div>

    <!-- Add/Edit Stream Modal -->
    <div id="streamModal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog"
        aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity backdrop-blur-sm" aria-hidden="true"
                onclick="closeModal()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <div
                class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full border border-gray-200 dark:border-gray-700">
                <div class="bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <h3 class="text-xl leading-6 font-semibold text-gray-900 dark:text-white mb-6" id="modalTitle">
                        Stream Configuration</h3>

                    <form id="streamForm">
                        <input type="hidden" id="editOriginalName" name="originalName">

                        <!-- Common Fields -->
                        <div class="grid grid-cols-1 gap-4 mb-6">
                            <div>
                                <label for="streamName"
                                    class="block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1">Stream
                                    Name</label>
                                <input type="text" id="streamName" name="name" required placeholder="e.g. backyard-cam"
                                    class="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg py-2 px-3 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <!-- Scan Results -->
                                <div id="scanResults"
                                    class="hidden mt-3 bg-gray-50 dark:bg-gray-900 p-2 rounded border border-gray-200 dark:border-gray-700 max-h-32 overflow-y-auto">
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">Discovered Devices (Port
                                        554):</p>
                                    <div id="scanList" class="space-y-1"></div>
                                </div>
                            </div>
                            <div>
                                <label for="streamUrl"
                                    class="block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1">Source URL
                                    (RTSP/HTTP)</label>
                                <input type="text" id="streamUrl" name="url" required
                                    placeholder="rtsp://user:pass@ip:554/stream"
                                    class="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg py-2 px-3 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500">

                                <!-- Moved Test Connection Button -->
                                <div class="mt-2 text-right">
                                    <button type="button" id="testStreamBtn" onclick="testStreamConnection()"
                                        class="text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 px-3 py-1.5 rounded transition-colors w-full sm:w-auto">
                                        Test Connection
                                    </button>
                                    <span id="testConnectionResult"
                                        class="block text-right mt-1 text-xs font-medium"></span>
                                </div>

                                <div class="mt-2">
                                    <button type="button" id="scanNetworkBtn" onclick="scanNetwork()"
                                        class="text-xs bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 hover:bg-indigo-200 dark:hover:bg-indigo-900 px-3 py-1 rounded transition-colors flex items-center gap-1 w-full justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                                        </svg>
                                        or Scan Local Network
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Optimization Section -->
                        <div class="mb-6">
                            <label
                                class="block text-sm font-medium text-gray-700 dark:text-gray-400 mb-3 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    class="h-4 w-4 mr-1 text-orange-500 dark:text-orange-400" viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"
                                        clip-rule="evenodd" />
                                </svg>
                                Quick Optimization
                            </label>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                <!-- H.264 Native -->
                                <div class="opt-card cursor-pointer border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-transparent rounded-lg p-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                                    onclick="selectOptimization('h264_native', this)">
                                    <div class="font-bold text-sm text-gray-900 dark:text-white mb-1">H.264 Native</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">Direct pass-through. 0% CPU.
                                        Best for standard cameras.</div>
                                </div>
                                <!-- H.265 Native -->
                                <div class="opt-card cursor-pointer border border-green-200 dark:border-green-600/50 bg-green-50/50 dark:bg-transparent rounded-lg p-3 hover:bg-green-100 dark:hover:bg-gray-700 transition-colors"
                                    onclick="selectOptimization('h265_native', this)">
                                    <div class="font-bold text-sm text-green-700 dark:text-green-400 mb-1">H.265 Native
                                    </div>
                                    <div class="text-xs text-green-600/80 dark:text-gray-400">Direct pass-through. 0%
                                        CPU. For HEVC cameras.</div>
                                </div>
                                <!-- Ultra Low CPU -->
                                <div class="opt-card cursor-pointer border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-transparent rounded-lg p-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                                    onclick="selectOptimization('ultra_low', this)">
                                    <div class="font-bold text-sm text-orange-600 dark:text-orange-400 mb-1">Ultra Low
                                        CPU</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">Fast transcode. Low Res/FPS.
                                        For weak hardware.</div>
                                </div>
                                <!-- Custom/Manual -->
                                <div class="opt-card cursor-pointer border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-transparent rounded-lg p-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                                    id="manualCard" onclick="selectOptimization('manual', this)">
                                    <div class="font-bold text-sm text-blue-600 dark:text-blue-400 mb-1">Manual /
                                        Detailed</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">Full control over codecs and
                                        transcoding.</div>
                                </div>
                            </div>
                        </div>

                        <!-- Advanced Styling Toggle -->
                        <div class="border-t border-gray-200 dark:border-gray-700 pt-4">
                            <button type="button" id="toggleAdvancedArgs"
                                class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 flex items-center">
                                <span class="mr-1">â–¶</span> Advanced Stream Tuning (Manual)
                            </button>

                            <div id="advancedOptions"
                                class="hidden mt-4 bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                                <div class="mb-4">
                                    <label for="streamType"
                                        class="block text-xs font-medium text-gray-500 dark:text-gray-500 mb-1">Internal
                                        Engine</label>
                                    <select id="streamType"
                                        class="w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm py-1 px-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="direct">Direct (RTSP/HTTP)</option>
                                        <option value="ffmpeg">FFmpeg Transcode</option>
                                    </select>
                                </div>

                                <div id="ffmpegOptions" class="hidden">
                                    <div class="grid grid-cols-2 gap-3 mb-3">
                                        <div>
                                            <label class="block text-xs text-gray-500 dark:text-gray-500 mb-1">Video
                                                Codec</label>
                                            <select id="videoCodec"
                                                class="w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm py-1 px-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                <option value="">Copy (No Transcode)</option>
                                                <option value="h264">H.264 (Universal)</option>
                                                <option value="h265">H.265 (HEVC)</option>
                                                <option value="mjpeg">MJPEG</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-xs text-gray-500 dark:text-gray-500 mb-1">Audio
                                                Codec</label>
                                            <select id="audioCodec"
                                                class="w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm py-1 px-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                <option value="">Copy (No Transcode)</option>
                                                <option value="aac">AAC</option>
                                                <option value="opus">Opus</option>
                                                <option value="pcmu">PCMU</option>
                                            </select>
                                        </div>

                                    </div>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-xs text-gray-500 dark:text-gray-500 mb-1">Hardware
                                                Accel</label>
                                            <select id="hwAccel"
                                                class="w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm py-1 px-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                <option value="">None (CPU)</option>
                                                <option value="auto">Auto-Detect</option>
                                                <option value="d3d11va">Windows (D3D11)</option>
                                                <option value="cuda">Nvidia (CUDA)</option>
                                                <option value="qsv">Intel (QSV)</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label
                                                class="block text-xs text-gray-500 dark:text-gray-500 mb-1">Preset</label>
                                            <select id="preset"
                                                class="w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm py-1 px-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                <option value="">Default</option>
                                                <option value="ultrafast">Ultrafast</option>
                                                <option value="superfast">Superfast</option>
                                                <option value="medium">Medium</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>
                <div
                    class="bg-gray-50 dark:bg-gray-800/50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse border-t border-gray-200 dark:border-gray-700">
                    <button type="button" id="saveStreamBtn"
                        class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 sm:ml-3 sm:w-auto sm:text-sm shadow-md">
                        Save Configuration
                    </button>
                    <button type="button" onclick="closeModal()"
                        class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-transparent text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog"
        aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity backdrop-blur-sm" aria-hidden="true"
                onclick="closeShareModal()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <div
                class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full border border-gray-200 dark:border-gray-700">
                <div class="bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <h3 class="text-xl leading-6 font-semibold text-gray-900 dark:text-white mb-4">Share Stream</h3>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1">Stream
                            Link</label>
                        <div class="flex rounded-md shadow-sm">
                            <input type="text" id="shareLink" readonly
                                class="flex-1 min-w-0 block w-full px-3 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-blue-500 focus:border-blue-500">
                            <button onclick="copyToClipboard('shareLink')"
                                class="inline-flex items-center px-3 py-2 border border-l-0 border-gray-300 dark:border-gray-600 rounded-r-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 text-sm font-medium">
                                Copy
                            </button>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1">Embed
                            Code</label>
                        <div class="relative">
                            <textarea id="embedCode" rows="3" readonly
                                class="shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white font-mono text-xs p-2"></textarea>
                            <button onclick="copyToClipboard('embedCode')"
                                class="absolute top-2 right-2 p-1 bg-gray-200 dark:bg-gray-600 rounded hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-600 dark:text-gray-300 text-xs">
                                Copy
                            </button>
                        </div>
                    </div>
                </div>
                <div
                    class="bg-gray-50 dark:bg-gray-800/50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse border-t border-gray-200 dark:border-gray-700">
                    <button type="button" onclick="closeShareModal()"
                        class="w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-transparent text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script src="/static/js/app.js?v=15"></script>
</body>

</html>